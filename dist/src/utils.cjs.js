"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const n=require("./constants.cjs.js"),d=require("./webvtt/segments/Cue.cjs.js"),T=require("./webvtt/segments/Comment.cjs.js"),g=require("./webvtt/segments/Header.cjs.js"),j=require("./webvtt/segments/Style.cjs.js"),f=require("../node_modules/lodash-es/fromPairs.cjs.js"),_=require("../node_modules/lodash-es/isEmpty.cjs.js"),h=require("../node_modules/lodash-es/camelCase.cjs.js"),C=require("../node_modules/lodash-es/toPairs.cjs.js");function G(t){const s=[];return t.forEach(e=>{const r=l(e)?g.fromString(e,!1):!1,i=u(e)?d.fromString(e,!1):!1,o=m(e)?T.fromString(e,!1):!1,p=E(e)?j.fromString(e,!1):!1;r&&s.push(r),i&&s.push(i),o&&s.push(o),p&&s.push(p)}),s}function c(t){let s=t.split(":"),e=0,r=1;for(;s.length>0;)e+=r*parseFloat(s.pop()),r*=60;return e}function a(t){return new Date(t*1e3).toISOString().substr(11,12)}const y=t=>n.VTT_VALIDATION_REGEX.test(t),l=t=>n.SEGMENT_HEADER_REGEX.test(t),u=t=>n.SEGMENT_CUE_REGEX.test(t),m=t=>n.SEGMENT_COMMENT_REGEX.test(t),E=t=>n.SEGMENT_STYLE_REGEX.test(t),M=t=>{if(!l(t))return!1;const{description:s,meta:e}=t.match(n.SEGMENT_HEADER_REGEX).groups;let r={};return e&&(r=f(e.split(`
`).map(i=>i.split(":").map(o=>o.replace(/^\s/,""))))),{description:s,meta:_(r)?void 0:r}},N=t=>{if(!u(t))return!1;const{identifier:s,timings:e,text:r}=t.match(n.SEGMENT_CUE_REGEX).groups,i=e.split(" --> ")[0],o=e.split(" --> ")[1];return{identifier:s,startTime:c(i),endTime:c(o),text:r}},R=t=>{if(!m(t))return!1;const{text:s}=t.match(n.SEGMENT_COMMENT_REGEX).groups;return{text:s}},b=t=>{if(!E(t))return!1;const{styles:s,selector:e}=t.match(n.SEGMENT_STYLE_REGEX).groups;return{styles:f(s.replace(/ {2,}/g,"").split(`
`).map(i=>{const o=i.replace(": ",":").replace(";","").split(":");return[h(o[0]),o[1]]})),selector:e}},S=(t,s,e)=>a(t)+" --> "+a(s)+(e?" "+C(e).map(r=>r.join(":")).join(" "):""),H=(t,s)=>S(t,s).replaceAll(".",","),q=t=>t.replace(/<\/?[^>]+(>|$)/g,"");exports.createSegments=G;exports.getComment=R;exports.getCue=N;exports.getHeader=M;exports.getStyle=b;exports.hmsToSeconds=c;exports.isComment=m;exports.isCue=u;exports.isHeader=l;exports.isStyle=E;exports.isVtt=y;exports.secondsToHms=a;exports.stripTags=q;exports.toSrtTimingString=H;exports.toVttTimingString=S;
